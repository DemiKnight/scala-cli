"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9497],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return f}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),f=r,m=d["".concat(l,".").concat(f)]||d[f]||u[f]||i;return n?o.createElement(m,a(a({ref:t},p),{},{components:n})):o.createElement(m,a({ref:t},p))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,a[1]=s;for(var c=2;c<i;c++)a[c]=n[c];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},80:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return f},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return u}});var o=n(3117),r=n(102),i=(n(7294),n(3905)),a=["components"],s={title:"BuildInfo",sidebar_position:6},l=void 0,c={unversionedId:"reference/build-info",id:"reference/build-info",title:"BuildInfo",description:"BuildInfo is a restricted feature and requires setting the --power option to be used.",source:"@site/docs/reference/build-info.md",sourceDirName:"reference",slug:"/reference/build-info",permalink:"/docs/reference/build-info",draft:!1,editUrl:"https://github.com/Virtuslab/scala-cli/edit/main/website/docs/reference/build-info.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"BuildInfo",sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Project root directory",permalink:"/docs/reference/root-dir"},next:{title:"Supported scala versions",permalink:"/docs/reference/scala-versions"}},p={},u=[{value:"Usage",id:"usage",level:2},{value:"Project version",id:"project-version",level:2}],d={toc:u};function f(e){var t=e.components,n=(0,r.Z)(e,a);return(0,i.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"BuildInfo is a restricted feature and requires setting the ",(0,i.kt)("inlineCode",{parentName:"p"},"--power")," option to be used.\nYou can pass it explicitly or set it globally by running:"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre"},"scala-cli config power true\n"))),(0,i.kt)("p",null,"During the building process Scala CLI collects information about the project's configuration,\nboth from the console options and ",(0,i.kt)("inlineCode",{parentName:"p"},"using directives")," found in the project's sources.\nYou can access this information from your code using the ",(0,i.kt)("inlineCode",{parentName:"p"},"BuildInfo")," object, that's automatically generated for your\nbuild on compile when that information changes."),(0,i.kt)("p",null,"To enable BuildInfo generation pass the ",(0,i.kt)("inlineCode",{parentName:"p"},"--build-info")," option to Scala CLI or use a\n",(0,i.kt)("inlineCode",{parentName:"p"},"//> using buildInfo")," directive."),(0,i.kt)("h2",{id:"usage"},"Usage"),(0,i.kt)("p",null,"The generated BuildInfo object is available on the project's classpath. To access it you need to import it first.\nIt is available in the package ",(0,i.kt)("inlineCode",{parentName:"p"},"scala.cli.build")," so use"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"import scala.cli.build.BuildInfo\n")),(0,i.kt)("p",null,"to import it."),(0,i.kt)("p",null,"Below you can find an example instance of the BuildInfo object, with all fields explained.\nSome of the values have been shortened for readability."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},'package scala.cli.build\n\n/** Information about the build gathered by Scala CLI */\nobject BuildInfo {\n  /** version of Scala used to compile this project */\n  val scalaVersion = "3.3.0"\n  /** target platform of this project, it can be "JVM" or "JS" or "Native" */\n  val platform = "JVM"\n  /** version of JVM, if it\'s the target platform */\n  val jvmVersion = Some("11")\n  /** version of Scala.js, if it\'s the target platform */\n  val scalaJsVersion = None\n  /** Scala.js ECMA Script version, if Scala.js is the target platform */\n  val jsEsVersion = None\n  /** version of Scala Native, if it\'s the target platform */\n  val scalaNativeVersion = None\n  /** Main class specified for the project */\n  val mainClass = Some("Main")\n  /** Project version */\n  val projectVersion = None\n\n  /** Information about the Main scope */\n  object Main {\n    /** sources found for the scope */\n    val sources = Seq(".../Main.scala")\n    /** scalac options for the scope */\n    val scalacOptions = Seq("-Werror")\n    /** compiler plugins used in this scope */\n    val scalaCompilerPlugins = Nil\n    /** dependencies used in this scope */\n    val dependencies = Seq("com.lihaoyi:os-lib_3:0.9.1")\n    /** dependency resolvers used in this scope */\n    val resolvers = Seq("https://repo1.maven.org/maven2", "ivy:file:...")\n    /** resource directories used in this scope */\n    val resourceDirs = Seq(".../resources")\n    /** custom jars added to this scope */\n    val customJarsDecls = Seq(".../AwesomeJar1.jar", ".../AwesomeJar2.jar")\n  }\n\n  /** Information about the Test scope */\n  object Test {\n    /** sources found for the scope */\n    val sources = Seq(".../MyTests.scala")\n    /** scalac options for the scope */\n    val scalacOptions = Seq("-Vdebug")\n    /** compiler plugins used in this scope */\n    val scalaCompilerPlugins = Nil\n    /** dependencies used in this scope */\n    val dependencies = Seq("org.scala-lang:toolkit_3:latest.release")\n    /** dependency resolvers used in this scope */\n    val resolvers = Seq("https://repo1.maven.org/maven2", "ivy:file:...")\n    /** resource directories used in this scope */\n    val resourceDirs = Seq(".../test/resources")\n    /** custom jars added to this scope */\n    val customJarsDecls = Nil\n  }\n}\n')),(0,i.kt)("h2",{id:"project-version"},"Project version"),(0,i.kt)("p",null,"A part of the BuildInfo object is the project version. By default, an attempt is made to deduce it using git tags\nof the workspace repository. If this fails (e.g. no git repository is present), the version is set to ",(0,i.kt)("inlineCode",{parentName:"p"},"0.1.0-SNAPSHOT"),".\nYou can override this behaviour by passing the ",(0,i.kt)("inlineCode",{parentName:"p"},"--project-version")," option to Scala CLI or by using a\n",(0,i.kt)("inlineCode",{parentName:"p"},"//> using projectVersion")," directive."),(0,i.kt)("p",null,"Please note that only tags that follow the semantic versioning are taken into consideration."),(0,i.kt)("p",null,"Values available for project version configuration are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"git:tag")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"git"),": use the latest stable git tag, if it is older than HEAD then try to increment it\nand add a suffix ",(0,i.kt)("inlineCode",{parentName:"li"},"-SNAPSHOT"),", if no tag is available then use ",(0,i.kt)("inlineCode",{parentName:"li"},"0.1.0-SNAPSHOT")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"git:dynver"),": use the latest (stable or unstable) git tag, if it is older than HEAD then use the output of\n",(0,i.kt)("inlineCode",{parentName:"li"},"-{distance from last tag}-g{shortened version of HEAD commit hash}-SNAPSHOT"),", if no tag is available then use ",(0,i.kt)("inlineCode",{parentName:"li"},"0.1.0-SNAPSHOT"))),(0,i.kt)("p",null,"The difference between stable and unstable tags are, that the latter can contain letters, e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"v0.1.0-RC1"),".\nIt is also possible to specify the path to the repository, e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"git:tag:../my-repo"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"git:dynver:../my-repo"),"."))}f.isMDXComponent=!0}}]);